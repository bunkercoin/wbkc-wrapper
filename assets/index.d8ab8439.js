const p=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}};p();const r={polygonAddressRegex:/^[0][x][0-9a-zA-Z]{40}$/,bunkercoinAddressRegex:/^[B][a-zA-Z0-9]{33}$/,minDeposit:1e4,apiURL:"http://62.155.193.51:5000",explorerURL:"https://explorer.bunkercoin.xyz"},d=window.ethereum,u=async(a,o)=>d.request({method:a,params:o}).then(()=>[void 0,!0]).catch(n=>[n.message,!1]),y=async()=>{const a=new Web3Eth(d);return a!==void 0?await a.net.getId()==137?[void 0,!0]:await u("wallet_addEthereumChain",[{chainId:"0x89",chainName:"Matic Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]):["Unable to locate MetaMask",!1]},w=document.querySelector("#button-add-to-metamask");w.addEventListener("click",async()=>{const[a,o]=await y();a&&!o&&alert(a),await d.enable().catch(s=>{alert(`An error has occured while enabling MetaMask: ${s}`)});const n=Web3Utils.toChecksumAddress(d.selectedAddress);document.querySelector("#matic-address").innerText=n,document.querySelector("#noMetamask").style.display="none",document.querySelector("#onceMetamask").style.display="block";const c=await(await fetch(`${r.apiURL}/getDepositAddress/${n}`)).json(),e=JSON.parse(c.message),{node:t,signature:i}=c,m=await(await fetch(`${r.explorerURL}/?action=verify&verify_address=${t}&verify_signature=${i}&verify_message=${c.message}`)).json();if(m.success&&m.result===!1){alert("The signature is invalid.");return}document.querySelector("#wrap-deposit-address").innerText=e.depositAddress;const l=(await(await fetch(`${r.apiURL}/getBalance/${n}`)).text()).slice(1).slice(0,-1);l!==document.querySelector("#wrap-confirmed").innerText&&(document.querySelector("#wrap-confirmed").innerText=l,parseFloat(l)>r.minDeposit&&(document.querySelector("#button-emit").style.display="block")),setInterval(async()=>{const s=(await(await fetch(`${r.apiURL}/getBalance/${n}`)).text()).slice(1).slice(0,-1);s!==document.querySelector("#wrap-confirmed").innerText&&(document.querySelector("#wrap-confirmed").innerText=s,parseFloat(s)>r.minDeposit&&(document.querySelector("#button-emit").style.display="block"));const f=(await(await fetch(`${r.apiURL}/getBalanceUnconfirmed/${n}`)).text()).slice(1).slice(0,-1);f!==document.querySelector("#wrap-unconfirmed").innerText&&(document.querySelector("#wrap-unconfirmed").innerText=f)},300*1e3),document.querySelector("#button-emit").addEventListener("click",async()=>{const s=await(await fetch(`${r.apiURL}/emitwBKC/${n}`)).json();console.log(s)})});const h=document.querySelector("#button-add-token");h.addEventListener("click",async()=>{await u("wallet_watchAsset",{type:"ERC20",options:{address:"0x5BCda6E59262A96a599Ea938c9B679714c105Bba",symbol:"wBKC",decimals:18}})});const g=document.querySelector("#button-add-token-2");g.addEventListener("click",async()=>{await u("wallet_watchAsset",{type:"ERC20",options:{address:"0x5BCda6E59262A96a599Ea938c9B679714c105Bba",symbol:"wBKC",decimals:18}})});
